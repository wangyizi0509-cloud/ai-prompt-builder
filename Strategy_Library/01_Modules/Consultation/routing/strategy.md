# 路由类策略 (Routing Strategy)

## 1. 模块定位
*   **角色**：流量调度员
*   **核心目标**：识别应由其他模块处理的需求，简要回应后引导用户前往
*   **输入**：被分类为 `ROUTING` 的用户 Query
*   **输出**：简答 + 模块引导

## 2. 路由判断与目标模块

| 需求类型 | 识别特征 | 路由目标 |
|:---|:---|:---|
| **诊断需求** | 需要全面分析关系、定位阶段、评估态度 | → 现状分析模块 |
| **规划需求** | 需要制定行动计划、任务拆解、阶段规划 | → 行动指南模块 |
| **话术需求** | 需要针对聊天场景生成具体回复 | → 聊天分析模块 |

## 3. 各路由类型的策略

### 3.1 诊断需求 → 现状分析

**识别特征**：
- 希望全面了解关系现状
- 询问处于什么阶段/坐标
- 需要系统性评估对方态度

**回复策略**：
- **简答**：给出初步判断或思路（不深入展开）
- **引导**：说明现状分析模块能提供更全面的诊断

---

### 3.2 规划需求 → 行动指南

**识别特征**：
- 希望制定推进计划
- 询问接下来几步怎么走
- 需要任务拆解和时间安排

**回复策略**：
- **简答**：给出大方向或核心原则
- **引导**：说明行动指南模块能提供具体的任务拆解

---

### 3.3 话术需求 → 聊天分析

**识别特征**：
- 需要针对聊天内容生成回复
- 询问怎么开口/怎么回/怎么约
- 有具体的对话场景

**回复策略**：
- **简答**：给出回复的核心思路/方向
- **引导**：说明聊天分析模块能生成更精准的话术

---

## 4. 路由 vs 直接回答的边界

| 情况 | 处理方式 | 理由 |
|:---|:---|:---|
| "她这是什么意思" | 直接回答 (SEEK_ANSWER) | 简单的单点问题 |
| "帮我全面分析她的态度" | 路由 (ROUTING) | 需要系统性诊断 |
| "我该表白吗" | 直接回答 (SEEK_ANSWER) | 决策建议类 |
| "帮我制定追她的完整计划" | 路由 (ROUTING) | 需要任务拆解 |

**判断原则**：
- 单点问题 → 咨询模块自己答
- 需要系统性/结构化输出 → 路由到专业模块

---

## 5. 模块调用能力

路由类策略在回复过程中，可能发现需要触发其他模块更新（如用户反馈的信息导致行动指南需要调整）。

**调用触发条件**：
- 用户提供的新信息导致关系判断改变 → 现状分析需更新
- 咨询建议与当前行动指南冲突 → 行动指南需更新
- 用户反馈任务执行结果 → 行动指南需更新

**调用方式**：*待整体设计*

---

## 6. 通用原则

| 原则 | 说明 |
|:---|:---|
| **先给价值** | 不要空手引导，先给一个有用的观点/思路 |
| **自然过渡** | 引导语要自然，不要像机器人指令 |
| **说明好处** | 让用户知道去那个模块能得到什么 |

## 7. 待优化
*   [ ] 细化路由判断的边界规则
*   [ ] 优化引导话术，提高模块跳转率
*   [ ] 模块调用机制设计
