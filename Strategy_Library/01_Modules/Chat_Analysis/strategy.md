# 聊天分析策略文档 (Chat Analysis Strategy)

## 1. 模块定位
*   **角色**：执行嘴替 (Execution Mouthpiece)
*   **核心目标**：解决"下一句怎么回"以及"为什么要这么回"。
*   **输入**：
    1.  **聊天现场**：对方发来的文字/截图、最后一句回复。
    2.  **战略上下文 (必选)**：
        *   **当前坐标 (L/T)**：决定回复的激进程度（如 L1 慎用 R，L3 多用 R）。
        *   **对方画像 (Persona)**：决定语气的适配度。
        *   **近期互动 (History)**：确保对话连贯性，避免断片。
*   **输出**：潜台词解码 + 风控提示 + AI推荐的主选回复 + 连招预判。

## 2. 理想态标准 (Ideal State)

### 2.1 真人感 / 去 AI 味 (Human-like) ⭐ 最高优先级
生成的回复必须像真人说的话，而不是 AI 生成的"完美句子"。
*   **符合用户人设**：如果用户平时不用"哈哈哈"，AI 就不能生成"哈哈哈"；如果用户是理工直男风格，回复就不能太文艺。
*   **口语化 / 碎片化**：真人微信聊天不会用完整书面句子，会有语气词、断句、不完整表达。
*   **长度控制**：微信单条消息一般不超过 2 行（约 30 字），长消息拆成多条发。
*   **禁止 AI 味词汇**：不用"好的呢"、"没问题哦"、"很高兴..."等客服腔。

### 2.2 透视眼 (X-Ray Vision)
能一眼看穿女生的潜台词（测试、兴趣指标、礼貌敷衍），并直白地告诉用户（委婉的诚实）。

### 2.3 教学性 (Educational)
不仅给鱼（话术），还授人以渔（解释为什么推荐这个维度）。

## 3. 核心策略逻辑 (Core Logic)

### 3.1 分析流程 (The Pipeline)
1.  **上下文锚定 (Context Anchoring)**：
    *   检查 L/T 坐标。如果是 T 线（陷阱区），策略转为"防御/后撤/止损"，而非"进攻"。
2.  **意图解码 (Intent Decoding)**：
    *   判断对方意图：是 IOI (兴趣指标)、IOD (无兴趣指标)、Shit Test (废物测试) 还是 ASD (反荡妇防卫机制)？
3.  **风控审查 (Risk Check)**：
    *   识别"跪舔"、"索取价值"、"查户口"、"说教"等减分行为，列入红线警告。

### 3.2 回复生成策略：ACR 功能矩阵
AI 根据当前情境**自动判断并推荐**最优的 ACR 维度，而非让用户盲选。

**三个维度定义**：
*   **C+ (Comfort / 情绪价值)**：共情、认可、接纳、提供安全感。
*   **A+ (Attraction / 高价值展示)**：展示生活面、独特观点、设立边界、不卑不亢。
*   **R+ (Romance / 推拉张力)**：调情、曲解、推拉、制造暧昧。

**AI 推荐逻辑**：
1.  **主推回复**：AI 判断当前最适合的维度，给出具体话术 + 解释为什么选这个。
2.  **备选思路**：简要说明另外两个维度的适用情况，让用户有选择权但不迷茫。
3.  **风险提示**：告知主推方案的潜在风险（如 C+ 用多了会变男闺蜜）。

### 3.3 场景覆盖 (Scenarios)
模块需覆盖以下四类场景，具体策略由 AI 根据上下文动态判断：
*   **主动开场 (Initiate)**：用户想主动找话题聊。
*   **被动回复 (Respond)**：对方发来消息，用户不知道怎么接。
*   **冷场急救 (Revive)**：对话断了/对方不回，想重新激活。
*   **邀约推进 (Date)**：想从线上转线下，约出来见面。

## 4. 输出结构规范 (Output Structure)
输出分为两个模块：

### 模块一：🧠 解读
1.  **🔍 潜台词解码**：她这句话真正想表达什么？
2.  **⚠️ 红色风控**：绝对不能回什么（避坑指南）。
3.  **🚀 连招预判**：回完这句后，预判她可能会怎么回，我们下一步该做什么。

### 模块二：💬 回复示例
提供三个不同风格的回复示例，每个附 1-2 句解释，并标注 AI 推荐哪个。

## 5. 待解决问题 (Issues)
*   [ ] **表情包语义**：目前对表情包的解读能力较弱，需结合上下文增强。
*   [ ] **群聊场景**：目前仅支持 1v1 私聊，群聊中的"借力打力"策略尚未定义。
*   [ ] **语音/通话**：针对语音语调的分析（如不耐烦、撒娇）暂缺。
*   [ ] **用户语言风格学习**：如何从历史聊天记录中提取用户的个人表达习惯。
